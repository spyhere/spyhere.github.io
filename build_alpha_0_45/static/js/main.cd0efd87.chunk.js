(this.webpackJsonpscore_gym=this.webpackJsonpscore_gym||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/metro_1.14d657e7.mp3"},function(e,t,a){e.exports=a.p+"static/media/metro_other.29b77406.mp3"},function(e,t,a){e.exports=a.p+"static/media/clap01.3019756d.mp3"},function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(8),i=a.n(s),l=(a(17),a(2)),o=a(3),u=a(1),c=a(6),h=a(5),m=a(9),p=a.n(m),f=a(10),d=a.n(f),v=a(11),g=a.n(v),b=a(4),y=[[["whole","whole--rest",4],["half","half--rest",2],["quarter","quarter--rest",1],["eighth","eighth--rest",.5],["sixteenth","sixteenth--rest",.25],["thirty-second","thirty-second--rest",.125]]].concat([[["whole--dot","whole--dot--rest",6],["half--dot","half--dot--rest",3],["quarter--dot","quarter--dot--rest",1.5],["eighth--dot","eighth--dot--rest",.75],["sixteenth--dot","sixteenth--dot--rest",.375],["thirty-second--dot","thirty-second--dot--rest",.1875]]]);y=y.concat([[["whole--triplet","whole--quinteplet",4],["half--triplet","half--quinteplet",2],["quarter--triplet","quarter--quinteplet",1],["eighth--triplet","eighth--quinteplet",.5]]]);var E={two_quarters:2,three_quarters:3,four_quarters:4,five_quarters:5,seven_quarters:7,five_eights:2.5,six_eights:3},k=[/eighth|sixteenth|thirty-second/,/rest/],N=1,x=4,q=[],w=4,j=10,A=20,O=90,S=100,_=!0,M=0,R=0,I=!0,V=!1,T={whole:5,half:11,quarter:44,eighth:56,sixteenth:64,thirtySecond:0},G=Object.keys(T),B=[],C=null,K={whole:-.1,half:-.1,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},D=Object.keys(K),L=[],F=null,W={whole:-.1,half:3,quarter:10,eighth:12},J=Object.keys(W),P=[],Q=null,z=null,U={whole:-.1,half:5,quarter:15,eighth:20,sixteenth:25,thirtySecond:30},$=Object.keys(U),H=[],X=null,Y=0,Z=0,ee=0,te=75,ae=95,re=100,ne=null,se=[te,ae,re];function ie(){var e=[];q=[];for(var t=function(){var t=w-ee,a=Math.round(Math.random()*ne);Y=null,se.forEach((function(e,r){a<e&&!Y&&0!==Y&&t>=y[r][z[r][0].length-1][2]?Y=r:Y||0===Y||r!==z.length-1||(Y=0)})),!Number.isInteger(ee)&&2===Y&&ae>te?Y=1:!Number.isInteger(ee)&&2===Y&&ae<te&&(Y=0);var r=null,n=null;y[Y].forEach((function(e,a){e[2]<=t&&!r&&0!==r&&(r=a,n=a)}));var s=w-ee<=1&&q.length+1<x&&M&&2!==Y?Math.round(100*Math.random()):null;s<M&&s&&(r=1),le(r,ee,Y);var i=function(){if("whole--triplet"===y[Y][0][0]){return Math.round(100*Math.random())<=O?0:1}if(Math.round(100*Math.random())<j)return 1;return 0}(),l=y[Y][Z][2]-t;if(w-ee<=1&&!y[0].some((function(e){return e[2]===l}))&&!y[1].some((function(e){return e[2]===l}))&&2!==Y&&l>0&&(Z=n),ee+y[Y][Z][2]>w){var o=function(e,t,a,r,n){var s=w-n,i=0,l=null;for(;w-n;){var o=i?0:1;if(y[o].forEach((function(e,t){e[2]!==s||l||0===l||(l=t)})),i++,l){e.push([(0===r?"1":"")+y[o][l][r],y[o][l][2]]);e=oe(0,0,[],e),t.push(e),n+=y[o][l][2]}}e=[],n=0,i=0;for(;n!==y[Y][a][2]-s;){l=null;var u=i?0:1;y[u].forEach((function(e,t){e[2]!==y[Y][a][2]-s||l||0===l||(l=t)})),i++,l&&(e.push([y[u][l][r],y[u][l][2]]),n+=y[u][l][2])}return[e,t,n]}(e,q,Z,i,ee),u=Object(b.a)(o,3);e=u[0],q=u[1],ee=u[2]}else if(_&&!Number.isInteger(y[Y][Z][2]+ee)&&!Number.isInteger(ee)&&ee+y[Y][Z][2]<=w&&y[Y][Z][2]+ee>Math.ceil(ee)&&B.length<6&&2!==Y){var c=function(e,t,a,r,n){var s=Math.ceil(n)-n,i=0,l=null,o=0,u=function(){var e=o?0:1;y[e].forEach((function(a,o){!l&&0!==l&&y[e][o][2]<=s&&(e&&o<4||!e)&&(l=o,t.push([(0===r?"0":"")+y[e][l][r],y[e][l][2]]),s-=y[e][l][2],n+=y[e][l][2],i+=y[e][l][2])})),o++};for(;s>0;)u();s=y[e][a][2]-i,o=0,l=null;var c=function(){(s>1||o>1)&&y[0].forEach((function(e,a){!l&&0!==l&&y[0][a][2]<=s&&(l=a,t.push([y[0][l][r],y[0][l][2]]),s-=y[0][l][2],n+=y[0][l][2],l=null)}));var e=o?0:1;y[e].forEach((function(a,i){!l&&0!==l&&y[e][i][2]<=s&&(e&&i<4||!e)&&(l=i,t.push([y[e][l][r],y[e][l][2]]),s-=y[e][l][2],n+=y[e][l][2],l=null)})),o++};for(;s>0;)c();return[t,n]}(Y,e,Z,i,ee),h=Object(b.a)(c,2);e=h[0],ee=h[1]}else e.push([y[Y][Z][i],y[Y][Z][2]]),ee+=y[Y][Z][2];if("whole--triplet"===y[Y][0][0]){var m=[];!function(e,t,a,r){var n;n=a?y[e][t][2]/4*5:y[e][t][2]/2*3;var s=null,i=0,l=Math.round(100*Math.random())-1,o=function(){var e=n-i,t=null,o=void 0;if(y[0].forEach((function(a,r){a[2]<=e&&!t&&0!==t&&(t=r,s||(s=r))})),l<S)o=t=a?s+2:s+1;else{o=le(t,i,0,1)}r.push([y[0][o][0],y[0][o][2]]),i+=y[0][o][2]};for(;i<n;)o()}(Y,Z,i,m),e.push(m)}if(String(w-ee).length>3&&100*Math.random()<=70&&y[0].forEach((function(t){(t[2]+ee===Math.ceil(ee)||t[2]+ee===Math.ceil(ee)-N/2)&&String(w-ee).length>3&&(e.push([t[0],t[2]]),ee+=t[2])})),ee===w){e=oe(0,0,[],e),q.push(e),e=[],ee=0}};q.length<x;)t();return q[0].unshift(w),q}function le(e,t,a,r){var n,s=r?X:z[a][1];Z=0;var i=z[a][0];if(0===e?n=0:r||(n=Math.round(z[a][0][e-1][1])),Number.isInteger(t)&&z[a][0].length>e+2&&!r){var l=Math.round(100*Math.random());0===t&&l-30<A&&z[a][0].length>e+3?s=z[a][0][e+3][1]:l<A&&(s=z[a][0][e+2][1])}r&&(n=0===e?0:H[e-1][1],i=H);var o=Math.random()*(s-n)+n;for(var u in i)if(o<i[u][1])return Z=Number(u);return Z=e}function oe(e,t,a,r,n){var s=0;return r.forEach((function(i,l){if(e+=i[1],Array.isArray(i[0]))return i=oe(0,0,[],i,!0),s=0,t=0,void(a=[]);if(k[0].test(i[0])&&!k[1].test(i[0])?(t+=i[1],a.push(i[0])):(t=0,a=[]),(t>N||t===N&&!a.some((function(e){return/sixteenth|thirty-second/.test(e)})))&&(t=0,a=[]),/rest/.test(i[0])){var o=null;l+1<=r.length-1&&/rest/.test(r[l+1][0])&&I&&(y.forEach((function(t){return t.forEach((function(t){t[2]!==i[1]+r[l+1][1]||o||(r[l][0]=t[1],r[l][1]=t[2],e+=r[l+1][1],o=!0)}))})),o&&r.splice(l+1,1))}else{if(!k[0].test(i[0]))return;if(k[1].test(i[0]))return;l+1<=r.length-1&&k[0].test(r[l+1][0])&&!k[1].test(r[l+1][0])&&!/triplet|quinteplet/.test(r[l][0])&&(t!==i[1]||e===w/2||0!==l&&/--st|--gr/.test(r[l-1][0])&&!Array.isArray(r[l-1][0])||0!==l&&/rest/.test(r[l-1][0])&&Number.isInteger(e)&&V||!(l<=r.length-1)||/triplet|quinteplet/.test(r[l+1][0])?l>0&&/--st|--gr/.test(r[l-1][0])&&(e!==w/2&&t!==N||n)&&s&&l<=r.length-1&&!/triplet|quinteplet/.test(r[l+1][0])&&(/eighth/.test(i[0])?r[l][0]=r[l][0]+"--gr":new RegExp(i[0].match(/\D/g).join("")).test(r[l+1][0])||new RegExp(i[0].match(/\D/g).join("")).test(r[l-1][0])||/sixteenth|thirty-second/.test(i[0])&&/sixteenth|thirty-second/.test(r[l+1][0])?new RegExp(i[0].match(/\D/g).join("")).test(r[l+1][0])||/sixteenth|thirty-second/.test(i[0])&&/sixteenth|thirty-second/.test(r[l+1][0])?r[l][0]=r[l][0]+"--1--gr":r[l][0]=r[l][0]+"--0--gr":r[l][0]=r[l][0]+"--2--gr",s++):(/eighth/.test(i[0])?r[l][0]=r[l][0]+"--st":new RegExp(i[0].match(/\D/g).join("")).test(r[l+1][0])||/sixteenth|thirty-second/.test(i[0])&&/sixteenth|thirty-second/.test(r[l+1][0])?r[l][0]=r[l][0]+"--1--st":r[l][0]=r[l][0]+"--0--st",s++)),!/--st|--gr/.test(i[0])&&l>0&&/--st|--gr/.test(r[l-1][0])&&s&&(l===r.length-1||t===N||e===w/2||!k[0].test(r[l+1][0])||k[1].test(r[l+1][0])||/triplet|quinteplet/.test(r[l+1][0]))&&(/eighth/.test(i[0])?r[l][0]=r[l][0]+"--end":new RegExp(i[0].match(/\D/g).join("")).test(r[l-1][0])?r[l][0]=r[l][0]+"--1--end":r[l][0]=r[l][0]+"--0--end",t=0,a=[],s=0),/--st|--gr|--end/.test(i[0])||(t=0,a=[])}})),r}var ue,ce=[],he=[{half:1.333333333333333,quarter:.6666666666666667,eighth:.3333333333333333,sixteenth:.1666666666666667,thirty:.0833333333333333},{quarter:.8,eighth:.4,sixteenth:.2,thirty:.1}],me=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={bars:[],barsQuant:16,measure:"four_quarters",pauseValue:10,easyOBProb:20,tripletValue:90,groupRest:!0,showBeat:!1,bpm:60,easyGrouping:95,linkIns:!0,linkOut:50,lvl:2,simpleK:50,dotsK:-.1,groupK:60,beat:!0,beatNumb:!0,beamNum:1,receivedVal:[],receivedValTimeouts:[],noteValues:{whole:5,half:11,quarter:15,eighth:35,sixteenth:36,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},groupingValues:{whole:-.1,half:3,quarter:10,eighth:12},simValIns:{whole:-.1,half:5,quarter:15,eighth:20,sixteenth:25,thirtySecond:0},metronome:[]},r.tick01=n.a.createRef(),r.tick02=n.a.createRef(),r.note01=n.a.createRef(),r.nextGen=r.nextGen.bind(Object(u.a)(r)),r.beat=r.beat.bind(Object(u.a)(r)),r.beatNumb=r.beatNumb.bind(Object(u.a)(r)),r.beatReading=r.beatReading.bind(Object(u.a)(r)),r.beatReadingFunc=r.beatReadingFunc.bind(Object(u.a)(r)),r.stop=r.stop.bind(Object(u.a)(r)),r}return Object(o.a)(a,[{key:"nextGen",value:function(){var e=this;console.clear();var t,a=[];this.setState({bars:ie()}),setTimeout((function(){e.state.bars.forEach((function(e){e.forEach((function(e){if(/triplet/.test(e[0])?t=0:/quinteplet/.test(e[0])&&(t=1),!/triplet|quinteplet/.test(e[0])&&Array.isArray(e))if(Array.isArray(e[0]))for(var r in e)a.push(he[t][e[r][0].match(/[a-z]+/).join("")]);else a.push(e[1])}))})),e.setState({receivedVal:a})}),50)}},{key:"beat",value:function(){this.setState({beat:!this.state.beat})}},{key:"beatNumb",value:function(){this.setState({beatNumb:!this.state.beatNumb})}},{key:"beatReading",value:function(){var e=this;this.tick01.current.volume=.3,this.tick02.current.volume=.2;var t=[],a=0,r=E[this.state.measure]/(this.state.bpm/60)*1e3;for(this.tick01.current.play(),t.push(setInterval((function(){return e.tick01.current.play()}),r)),a+=r/E[this.state.measure];a<r;)setTimeout((function(){t.push(setInterval((function(){return e.tick02.current.play()}),r)),e.tick02.current.play()}),a),a+=r/E[this.state.measure];this.setState({metronome:t}),setTimeout(this.beatReadingFunc,E[this.state.measure]/(this.state.bpm/60)*1e3-50)}},{key:"beatReadingFunc",value:function(){var e=this,t=Array.from(document.querySelectorAll(".value")),a=[];t.shift();var r=0;t[0].classList.toggle("value--animation"),ce[0].load(),ce[0].play();var n=function(n){r+=1e3*e.state.receivedVal[n]/(e.state.bpm/60),Number(n)+1<=t.length-1&&a.push(setTimeout((function(){if(t[Number(n)+1].classList.toggle("value--animation"),!/--rest/.test(t[Number(n)+1].className)){var e=Math.floor(40*Math.random());ce[e].load(),ce[e].play()}}),r))};for(var s in t)n(s);this.setState({receivedValTimeouts:a}),ue=setTimeout(this.stop,r-100)}},{key:"stop",value:function(){var e=Array.from(document.querySelectorAll(".value"));e.shift();var t=this.state.receivedValTimeouts,a=this.state.metronome;for(var r in t)clearTimeout(t[r]),e[r].classList.contains("value--animation")&&e[r].classList.toggle("value--animation");for(var n in a)clearTimeout(a[n]);clearTimeout(ue)}},{key:"componentDidMount",value:function(){!function(e){for(var t in N=e.beamNum,x=e.barsQuant,w=E[e.measure],j=e.pauseValue,A=e.easyOBProb,O=e.tripletValue,S=e.easyGrouping,_=e.linkIns,M=e.linkOut,R=e.lvl,te=e.simpleK,ae=e.dotsK,re=e.groupK,ne=e.lvlK,I=e.groupRest,V=e.showBeat,T=e.noteValues,B=[],C=null,G)0!==T[G[t]]&&(B.push([G[t]]),B[t].push(T[G[t]]));for(var a in C=B.reverse()[0][1],B.reverse(),K=e.dottedValues,L=[],F=null,D)0!==K[D[a]]&&(L.push([D[a]]),L[a].push(K[D[a]]));for(var r in F=L.reverse()[0][1],L.reverse(),W=e.groupingValues,P=[],Q=null,J)0!==W[J[r]]&&(P.push([J[r]]),P[r].push(W[J[r]]));for(var n in Q=P.reverse()[0][1],P.reverse(),U=e.simValIns,H=[],X=null,$)0!==U[$[n]]&&(H.push([$[n]]),H[n].push(U[$[n]]));X=H.reverse()[0][1],H.reverse(),z=[[B,C],[L,F],[P,Q]],se=[te,ae,re],ne=0===R?te-1:1===R?ae-1:100}(this.state);for(var e=0;e<20;e++){var t=this.note01.current;t.volume=.2,ce.push(t);var a=t.cloneNode(!0);a.volume=.2,ce.push(a)}}},{key:"render",value:function(){var e=this,t=this.state.bars;return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("audio",{ref:this.tick01},n.a.createElement("source",{src:p.a,type:"audio/mpeg"})),n.a.createElement("audio",{ref:this.tick02},n.a.createElement("source",{src:d.a,type:"audio/mpeg"})),n.a.createElement("audio",{ref:this.note01},n.a.createElement("source",{src:g.a,type:"audio/mpeg"}))),n.a.createElement("header",null,n.a.createElement("h1",null,"Welcome to ",n.a.createElement("strong",null,"Score Gym")),n.a.createElement("nav",null,n.a.createElement("div",null,"Beginner, Intermediate, Expert"),n.a.createElement("div",null),n.a.createElement("button",{onClick:this.nextGen},"NextGen"),n.a.createElement("button",{onClick:this.beat},"Beat"),n.a.createElement("button",{onClick:this.beatNumb},"Num"),n.a.createElement("button",{onClick:this.beatReading},"Reading"),n.a.createElement("button",{onClick:this.stop},"Stop")),n.a.createElement("div",{className:"settings"},"SETTINGS: #measures, #number_of_bars, #bpm, #licked_notes"),n.a.createElement("div",{className:"info"},"#Info, #tutorial")),n.a.createElement("div",{className:"score_body"},n.a.createElement("div",{className:"score"},t.map((function(a,r){var s=0,i=0;return n.a.createElement("div",{className:t.length-1===r?"bar bar_last":0===r?"bar bar_first":"bar"},n.a.createElement("div",{className:"bar__inside"},a.map((function(t,l){if(l+1<=a.length-1&&Array.isArray(a[l+1][0]))return s+=t[1],n.a.createElement("div",{style:{position:"relative",height:"118px"}},n.a.createElement("span",{className:"tuplet__num"},/triplet/.test(t[0])?3:5),(0===l&&Array.isArray(t)||1===l&&s===t[1]||Number.isInteger(s-t[1])||l===a.length-1&&t[1]===e.state.beamNum)&&i<e.state.measure?n.a.createElement("div",{key:s+t[0],className:"beat",style:e.state.beat?/rest|whole/.test(t[0])?{opacity:"100%",top:"100%",left:"5px"}:/--end/.test(t[0])?{opacity:"100%",left:"10px"}:{opacity:"100%"}:{opacity:"0%"}},n.a.createElement("div",{style:e.state.beatNumb?{opacity:"1"}:{opacity:"0"}},s-t[1]+1),n.a.createElement("span",{style:{display:"none"}},i++)):null,n.a.createElement("div",{className:/triplet/.test(t[0])?"triplet":"quinteplet"},a[l+1].map((function(e,t){return t?t===a[l+1].length-1?n.a.createElement("div",{className:"value "+e[0],style:{marginRight:"0"},key:e[0]+String(r)}):n.a.createElement("div",{className:"value "+e[0],key:e[0]+String(r)}):n.a.createElement("div",{className:"value "+e[0],style:{marginLeft:"0"},key:e[0]+String(r)})}))));if(!Array.isArray(t[0])){var o,u=null;if(Array.isArray(t)&&("0"===t[0][0]||"1"===t[0][0])){var c=t[0].split("");u=Number(c.splice(0,1)),t[0]=c.join("")}if(Array.isArray(t)){var h=t[0].split("");h.reverse(),o=h.slice(0,3).join(""),s+=t[1]}return n.a.createElement("div",{className:Array.isArray(t)?"value "+t[0]:"value  "+e.state.measure,id:r+l},n.a.createElement(pe,{link:u,ch:o,ind:l,bars:e.state.bars}),(0===l&&Array.isArray(t)||1===l&&s===t[1]||Number.isInteger(s-t[1])||l===a.length-1&&t[1]===e.state.beamNum)&&i<E[e.state.measure]?n.a.createElement("div",{key:s+t[0],className:"beat",style:e.state.beat?/rest|whole/.test(t[0])?{opacity:"100%",top:"100%",left:"5px"}:/--end/.test(t[0])?{opacity:"100%",left:"10px"}:{opacity:"100%"}:{opacity:"0%"}},n.a.createElement("div",{style:e.state.beatNumb?{opacity:"1"}:{opacity:"0"}},s-t[1]+1),n.a.createElement("span",{style:{display:"none"}},i++)):null)}}))))})))))}}]),a}(n.a.Component),pe=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"shouldComponentUpdate",value:function(e){return this.props.bars!==e.bars}},{key:"render",value:function(){var e=null;return"dne"===this.props.ch&&0===this.props.link&&(e={left:"38px",width:"15px",top:"-21px",height:"40px"}),n.a.createElement("div",null,null!==this.props.link?n.a.createElement("div",{style:e,key:this.props.ch+this.props.ind,className:0===this.props.link?"linked_in":"linked_out"}):null)}}]),a}(n.a.Component),fe=me;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[12,1,2]]]);
//# sourceMappingURL=main.cd0efd87.chunk.js.map