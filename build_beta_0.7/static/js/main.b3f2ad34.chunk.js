(this.webpackJsonpscore_gym=this.webpackJsonpscore_gym||[]).push([[0],{45:function(e,t,a){e.exports=a.p+"static/media/metro_1.14d657e7.mp3"},46:function(e,t,a){e.exports=a.p+"static/media/metro_other.29b77406.mp3"},47:function(e,t,a){e.exports=a.p+"static/media/clap01.3019756d.mp3"},51:function(e,t,a){e.exports=a(84)},56:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),l=a.n(s),i=(a(56),a(12)),c=a(13),u=a(7),o=a(15),m=a(14),h=a(50),p={bars:[],barsQuant:8,measure:"four_quarters",pauseValue:10,easyOBProb:20,tripletValue:90,groupRest:!0,bpm:70,easyGrouping:95,linkIns:!0,linkOut:50,lvl:2,simpleK:50,dotsK:-.1,groupK:60,beat:!0,beatNumb:!0,beamNum:1,receivedVal:[],noteValues:{whole:5,half:11,quarter:15,eighth:35,sixteenth:36,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},groupingValues:{whole:-.1,half:3,quarter:10,eighth:12},quintepletMap:{whole:-.1,half:5,quarter:15,eighth:0},simValIns:{whole:-.1,half:5,quarter:15,eighth:20,sixteenth:25,thirtySecond:0},metronomeSwitch:!1,mistakes:null,mode:null,settings:!1,info:!1,tips:!0,tab:0},d=function(e){return{state:e}},g=function(e){return{newState:function(t){e(function(e){return{type:"CHANGE",newState:e}}(t))},updateState:function(t){e(function(e){return{type:"UPDATE",newState:e}}(t))}}},b=a(11),f=a(45),E=a.n(f),v=a(46),y=a.n(v),k=a(47),S=a.n(k),N=a(19),w=[[["whole","whole--rest",4],["half","half--rest",2],["quarter","quarter--rest",1],["eighth","eighth--rest",.5],["sixteenth","sixteenth--rest",.25],["thirty-second","thirty-second--rest",.125]]].concat([[["whole--dot","whole--dot--rest",6],["half--dot","half--dot--rest",3],["quarter--dot","quarter--dot--rest",1.5],["eighth--dot","eighth--dot--rest",.75],["sixteenth--dot","sixteenth--dot--rest",.375],["thirty-second--dot","thirty-second--dot--rest",.1875]]]);w=w.concat([[["whole--triplet","whole--quinteplet",4],["half--triplet","half--quinteplet",2],["quarter--triplet","quarter--quinteplet",1],["eighth--triplet","eighth--quinteplet",.5]]]);var _={two_quarters:2,three_quarters:3,four_quarters:4,five_quarters:5,seven_quarters:7,five_eights:2.5,six_eights:3},q=[/eighth|sixteenth|thirty-second/,/rest/],V=1,O=4,x=[],j=4,I=10,M=20,T=90,A=100,R=!0,L=0,C=0,P=!0,B=!1,D=70,K={whole:5,half:11,quarter:44,eighth:56,sixteenth:64,thirtySecond:0},F=Object.keys(K),G=[],U=null,H={whole:-.1,half:-.1,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},z=Object.keys(H),Q=[],X=null,W={whole:-.1,half:3,quarter:10,eighth:12},J=Object.keys(W),Y=[],$=null,Z=null,ee={whole:-.1,half:5,quarter:15,eighth:20,sixteenth:25,thirtySecond:30},te=Object.keys(ee),ae=[],ne=null,re={whole:-.1,half:5,quarter:15,eighth:0},se=Object.keys(re),le=[],ie=0,ce=0,ue=0,oe=75,me=95,he=100,pe=null,de=[oe,me,he];function ge(e){for(var t in V=e.beamNum,O=e.barsQuant,j=_[e.measure],I=e.pauseValue,M=e.easyOBProb,T=e.tripletValue,A=e.easyGrouping,R=e.linkIns,L=e.linkOut,C=e.lvl,oe=e.simpleK,me=e.dotsK,he=e.groupK,P=e.groupRest,B=e.showBeat,D=e.fixingBeatProb,K=e.noteValues,G=[],U=null,F)0!==K[F[t]]&&(G.push([F[t]]),G[t].push(K[F[t]]));for(var a in U=G.reverse()[0][1],G.reverse(),H=e.dottedValues,Q=[],X=null,z)0!==H[z[a]]&&(Q.push([z[a]]),Q[a].push(H[z[a]]));for(var n in X=Q.reverse()[0][1],Q.reverse(),W=e.groupingValues,Y=[],$=null,J)0!==W[J[n]]&&(Y.push([J[n]]),Y[n].push(W[J[n]]));for(var r in $=Y.reverse()[0][1],Y.reverse(),ee=e.simValIns,ae=[],ne=null,te)0!==ee[te[r]]&&(ae.push([te[r]]),ae[r].push(ee[te[r]]));for(var s in ne=ae.reverse()[0][1],ae.reverse(),re=e.quintepletMap,le=[],null,se)0!==re[se[s]]&&(le.push([se[s]]),le[s].push(re[se[s]]));le.reverse()[0][1],le.reverse(),Z=[[G,U],[Q,X],[Y,$]],de=[oe,me,he],pe=0===C?oe-1:1===C?me-1:100}function be(){var e=[];x=[];for(var t=function(){var t=j-ue,a=Math.round(Math.random()*pe);ie=null,de.forEach((function(e,n){a<e&&!ie&&0!==ie&&t>=w[n][Z[n][0].length-1][2]?ie=n:ie||0===ie||n!==Z.length-1||(ie=0)})),!Number.isInteger(ue)&&2===ie&&me>oe&&t>=w[1][Z[1][0].length-1][2]?ie=1:!Number.isInteger(ue)&&2===ie&&me<oe&&(ie=0);var n=null,r=null;w[ie].forEach((function(e,a){e[2]<=t&&!n&&0!==n&&(n=a,r=a)}));var s=j-ue<=1&&x.length+1<O&&L&&2!==ie?Math.round(100*Math.random()):null;s<L&&s&&(n=1),fe(n,ue,ie);var l=function(){if("whole--triplet"===w[ie][0][0]){return Math.round(100*Math.random())<=T||2===ie&&(le.length<=ce||le[ce][1]<0)?0:1}if(Math.round(100*Math.random())<I)return 1;return 0}(),i=w[ie][ce][2]-t;if(j-ue<=1&&!w[0].some((function(e){return e[2]===i}))&&!w[1].some((function(e){return e[2]===i}))&&2!==ie&&i>0&&(ce=r),ue+w[ie][ce][2]>j){var c=function(e,t,a,n,r){var s=j-r,l=0,i=null;for(;j-r;){var c=l?0:1;if(w[c].forEach((function(e,t){e[2]!==s||i||0===i||(i=t)})),l++,i){e.push([(0===n?"1":"")+w[c][i][n],w[c][i][2]]);e=Ee(0,0,[],e),t.push(e),r+=w[c][i][2]}}e=[],r=0,l=0;for(;r!==w[ie][a][2]-s;){i=null;var u=l?0:1;w[u].forEach((function(e,t){e[2]!==w[ie][a][2]-s||i||0===i||(i=t)})),l++,i&&(e.push([w[u][i][n],w[u][i][2]]),r+=w[u][i][2])}return[e,t,r]}(e,x,ce,l,ue),u=Object(N.a)(c,3);e=u[0],x=u[1],ue=u[2]}else if(R&&!Number.isInteger(w[ie][ce][2]+ue)&&!Number.isInteger(ue)&&ue+w[ie][ce][2]<=j&&w[ie][ce][2]+ue>Math.ceil(ue)&&G.length<6&&2!==ie){var o=function(e,t,a,n,r){var s=Math.ceil(r)-r,l=0,i=null,c=0,u=function(){var e=c?0:1;w[e].forEach((function(a,c){!i&&0!==i&&w[e][c][2]<=s&&(e&&c<4||!e)&&(i=c,t.push([(0===n?"0":"")+w[e][i][n],w[e][i][2]]),s-=w[e][i][2],r+=w[e][i][2],l+=w[e][i][2])})),c++};for(;s>0;)u();s=w[e][a][2]-l,c=0,i=null;var o=function(){(s>1||c>1)&&w[0].forEach((function(e,a){!i&&0!==i&&w[0][a][2]<=s&&(i=a,t.push([w[0][i][n],w[0][i][2]]),s-=w[0][i][2],r+=w[0][i][2],i=null)}));var e=c?0:1;w[e].forEach((function(a,l){!i&&0!==i&&w[e][l][2]<=s&&(e&&l<4||!e)&&(i=l,t.push([w[e][i][n],w[e][i][2]]),s-=w[e][i][2],r+=w[e][i][2],i=null)})),c++};for(;s>0;)o();return[t,r]}(ie,e,ce,l,ue),m=Object(N.a)(o,2);e=m[0],ue=m[1]}else e.push([w[ie][ce][l],w[ie][ce][2]]),ue+=w[ie][ce][2];if("whole--triplet"===w[ie][0][0]){var h=[];!function(e,t,a,n){var r;r=a?w[e][t][2]/4*5:w[e][t][2]/2*3;var s=null,l=0,i=Math.round(100*Math.random())-1,c=function(){var e=r-l,t=null,c=void 0;if(w[0].forEach((function(a,n){a[2]<=e&&!t&&0!==t&&(t=n,s||(s=n))})),i<A)c=t=a?s+2:s+1;else{c=fe(t,l,0,1)}n.push([w[0][c][0],w[0][c][2]]),l+=w[0][c][2]};for(;l<r;)c()}(ie,ce,l,h),e.push(h)}if(String(j-ue).length>3&&100*Math.random()<=D&&w[0].forEach((function(t){(t[2]+ue===Math.ceil(ue)||t[2]+ue===Math.ceil(ue)-V/2)&&String(j-ue).length>3&&(e.push([t[0],t[2]]),ue+=t[2])})),ue===j){e=Ee(0,0,[],e),x.push(e),e=[],ue=0}};x.length<O;)t();return x[0].unshift(j),x}function fe(e,t,a,n){var r,s=n?ne:Z[a][1];ce=0;var l=Z[a][0];if(0===e?r=0:n||(r=Math.round(Z[a][0][e-1][1])),Number.isInteger(t)&&Z[a][0].length>e+2&&!n){var i=Math.round(100*Math.random());0===t&&i-30<M&&Z[a][0].length>e+3?s=Z[a][0][e+3][1]:i<M&&(s=Z[a][0][e+2][1])}n&&(r=0===e?0:ae[e-1][1],l=ae);var c=Math.random()*(s-r)+r;for(var u in l)if(c<l[u][1])return ce=Number(u);return ce=e}function Ee(e,t,a,n,r){var s=0;return n.forEach((function(l,i){if(e+=l[1],Array.isArray(l[0]))return l=Ee(0,0,[],l,!0),s=0,t=0,void(a=[]);if(q[0].test(l[0])&&!q[1].test(l[0])?(t+=l[1],a.push(l[0])):(t=0,a=[]),(t>V||t===V&&!a.some((function(e){return/sixteenth|thirty-second/.test(e)})))&&(t=0,a=[]),/rest/.test(l[0])){var c=null;i+1<=n.length-1&&/rest/.test(n[i+1][0])&&P&&(w.forEach((function(t){return t.forEach((function(t){t[2]!==l[1]+n[i+1][1]||c||(n[i][0]=t[1],n[i][1]=t[2],e+=n[i+1][1],c=!0)}))})),c&&n.splice(i+1,1))}else{if(!q[0].test(l[0]))return;if(q[1].test(l[0]))return;i+1<=n.length-1&&q[0].test(n[i+1][0])&&!q[1].test(n[i+1][0])&&!/triplet|quinteplet/.test(n[i][0])&&(t!==l[1]||e===j/2||0!==i&&/--st|--gr/.test(n[i-1][0])&&!Array.isArray(n[i-1][0])||0!==i&&/rest/.test(n[i-1][0])&&Number.isInteger(e)&&B||!(i<=n.length-1)||/triplet|quinteplet/.test(n[i+1][0])?i>0&&/--st|--gr/.test(n[i-1][0])&&(e!==j/2&&t!==V||r)&&s&&i<=n.length-1&&!/triplet|quinteplet/.test(n[i+1][0])&&(/eighth/.test(l[0])?n[i][0]=n[i][0]+"--gr":new RegExp(l[0].match(/\D/g).join("")).test(n[i+1][0])||new RegExp(l[0].match(/\D/g).join("")).test(n[i-1][0])||/sixteenth|thirty-second/.test(l[0])&&/sixteenth|thirty-second/.test(n[i+1][0])?new RegExp(l[0].match(/\D/g).join("")).test(n[i+1][0])||/sixteenth|thirty-second/.test(l[0])&&/sixteenth|thirty-second/.test(n[i+1][0])?n[i][0]=n[i][0]+"--1--gr":n[i][0]=n[i][0]+"--0--gr":n[i][0]=n[i][0]+"--2--gr",s++):(/eighth/.test(l[0])?n[i][0]=n[i][0]+"--st":new RegExp(l[0].match(/\D/g).join("")).test(n[i+1][0])||/sixteenth|thirty-second/.test(l[0])&&/sixteenth|thirty-second/.test(n[i+1][0])?n[i][0]=n[i][0]+"--1--st":n[i][0]=n[i][0]+"--0--st",s++)),!/--st|--gr/.test(l[0])&&i>0&&/--st|--gr/.test(n[i-1][0])&&s&&(i===n.length-1||t===V||e===j/2||!q[0].test(n[i+1][0])||q[1].test(n[i+1][0])||/triplet|quinteplet/.test(n[i+1][0]))&&(/eighth/.test(l[0])?n[i][0]=n[i][0]+"--end":new RegExp(l[0].match(/\D/g).join("")).test(n[i-1][0])?n[i][0]=n[i][0]+"--1--end":n[i][0]=n[i][0]+"--0--end",t=0,a=[],s=0),/--st|--gr|--end/.test(l[0])||(t=0,a=[])}})),n}var ve,ye,ke,Se,Ne,we,_e,qe,Ve,Oe=a(4),xe=a.n(Oe),je=a(86),Ie=a(87),Me=a(88),Te=a(89),Ae=a(90),Re=a(91),Le=a(92),Ce=a(93),Pe=a(94),Be=a(95),De=a(96),Ke=Object(b.b)(d,g)((function(e){var t=Object(n.useState)("".concat(e.state.tab)),a=Object(N.a)(t,2),s=a[0],l=a[1],i=function(e){s!==e&&l(e)};return r.a.createElement("div",null,r.a.createElement("div",{className:"settings__tabs"},r.a.createElement(je.a,{tabs:!0},r.a.createElement(Ie.a,null,r.a.createElement(Me.a,{className:xe()({active:"1"===s}),onClick:function(){i("1"),e.newState({tab:1})}},"Score Settings")),r.a.createElement(Ie.a,null,r.a.createElement(Me.a,{className:xe()({active:"2"===s}),onClick:function(){i("2"),e.newState({tab:2})}},"Bar Settings")),r.a.createElement(Ie.a,null,r.a.createElement(Me.a,{className:xe()({active:"3"===s}),onClick:function(){i("3"),e.newState({tab:3})}},"Values Probability")),r.a.createElement(Ie.a,null,r.a.createElement(Me.a,{className:xe()({active:"4"===s}),onClick:function(){i("4"),e.newState({tab:4})}},"Note values"))),r.a.createElement(Te.a,{activeTab:s,className:"settings__tabs__content"},r.a.createElement(Ae.a,{tabId:"1"},r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"4"},r.a.createElement(Ce.a,{body:!0},r.a.createElement(Pe.a,null,"Measure"),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"4"},r.a.createElement("p",null,"2/4")),r.a.createElement(Le.a,{lg:"4"},r.a.createElement("p",null,"3/4")),r.a.createElement(Le.a,{lg:"4"},r.a.createElement("p",null,"4/4"))),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"4"},r.a.createElement("p",null,"5/4")),r.a.createElement(Le.a,{lg:"4"},r.a.createElement("p",null,"7/4")),r.a.createElement(Le.a,{lg:"4"},r.a.createElement("p",null,"5/8"))),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:{size:"4",offset:"4"}},r.a.createElement("p",null,"6/8"))))),r.a.createElement(Le.a,{lg:"3"},r.a.createElement(Ce.a,{body:!0},r.a.createElement(Pe.a,null,"Bar quantity"),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:{size:"4",offset:"4"}},r.a.createElement(Be.a,{type:"select",name:"selectMulti",id:"exampleSelectMulti",multiple:!0},r.a.createElement("option",null,"4"),r.a.createElement("option",null,"8"),r.a.createElement("option",null,"12"),r.a.createElement("option",null,"16"),r.a.createElement("option",null,"20")))))),r.a.createElement(Le.a,{lg:"3"},r.a.createElement(Ce.a,{body:!0},r.a.createElement(Pe.a,null,"BPM"),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:{size:"4",offset:"4"}},r.a.createElement(Be.a,{type:"number",name:"selectMulti",id:"exampleSelectMulti",defaultValue:e.state.bpm}))))))),r.a.createElement(Ae.a,{tabId:"2",className:"tab__bar-settings"},r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:{size:"6",offset:"3"}},r.a.createElement(Ce.a,{body:!0},r.a.createElement(De.a,null,"Easy on beat",r.a.createElement(Be.a,{type:"range",defaultValue:e.state.easyOBProb})),r.a.createElement(De.a,null,"Fixing beat",r.a.createElement(Be.a,{type:"range",defaultValue:e.state.fixingBeatProb})),r.a.createElement(De.a,null,"Pause value",r.a.createElement(Be.a,{type:"range",defaultValue:e.state.pauseValue})),r.a.createElement(De.a,{className:"settings__tabs__content__checkbox"},r.a.createElement(Be.a,{type:"checkbox",defaultChecked:e.state.groupRest})," Summing rests"),r.a.createElement(De.a,{className:"settings__tabs__content__checkbox"},r.a.createElement(Be.a,{type:"checkbox",defaultChecked:e.state.linkIns})," Link inside bar"),r.a.createElement(De.a,null,"Link outside the bar",r.a.createElement(Be.a,{type:"range",defaultValue:e.state.linkOut})),r.a.createElement(De.a,{className:"settings__tabs__content__checkbox"},r.a.createElement(Be.a,{type:"checkbox",defaultChecked:e.state.showBeat})," Show beat (beaming)"))))),r.a.createElement(Ae.a,{tabId:"3"},r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:{size:"6",offset:"3"}},r.a.createElement(Ce.a,{body:!0},r.a.createElement(Pe.a,null,"Values probability"),r.a.createElement(De.a,null,"simpleK",r.a.createElement(Be.a,{type:"range",defaultValue:e.state.simpleK})),r.a.createElement(De.a,null,"dotsK",r.a.createElement(Be.a,{type:"range",defaultValue:e.state.dotsK})),r.a.createElement(De.a,null,"tupletK",r.a.createElement(Be.a,{type:"range",defaultValue:e.state.groupK})))))),r.a.createElement(Ae.a,{tabId:"4"},r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"6",className:"mb-4"},r.a.createElement(Ce.a,{body:!0},r.a.createElement(Pe.a,null,"Simple note values"),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.noteValues.whole})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.noteValues.half})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.noteValues.quarter})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.noteValues.eighth})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.noteValues.sixteenth})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.noteValues.thirtySecond}))),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"whole")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"half")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"quarter")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"eighth")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"sixteenth")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"thirty-second"))))),r.a.createElement(Le.a,{lg:"6"},r.a.createElement(Ce.a,{body:!0},r.a.createElement(Pe.a,null,"Dotted note values"),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.dottedValues.whole})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.dottedValues.half})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.dottedValues.quarter})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.dottedValues.eighth})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.dottedValues.sixteenth})),r.a.createElement(Le.a,{lg:"2"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.dottedValues.thirtySecond}))),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"whole")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"half")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"quarter")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"eighth")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"sixteenth")),r.a.createElement(Le.a,{lg:"2"},r.a.createElement("p",null,"thirty-second"))))),r.a.createElement(Le.a,{lg:{size:"6",offset:"3"}},r.a.createElement(Ce.a,{body:!0},r.a.createElement(Pe.a,null,"Tuplet note values"),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"3"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.groupingValues.whole})),r.a.createElement(Le.a,{lg:"3"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.groupingValues.half})),r.a.createElement(Le.a,{lg:"3"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.groupingValues.quarter})),r.a.createElement(Le.a,{lg:"3"},r.a.createElement(Be.a,{type:"range",className:"input",defaultValue:e.state.groupingValues.eighth}))),r.a.createElement(Re.a,null,r.a.createElement(Le.a,{lg:"3"},r.a.createElement("p",null,"whole")),r.a.createElement(Le.a,{lg:"3"},r.a.createElement("p",null,"half")),r.a.createElement(Le.a,{lg:"3"},r.a.createElement("p",null,"quarter")),r.a.createElement(Le.a,{lg:"3"},r.a.createElement("p",null,"eighth"))))))))))})),Fe=a(97),Ge=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).mainPage=n.mainPage.bind(Object(u.a)(n)),n.tips=n.tips.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"mainPage",value:function(){var e=this;setTimeout((function(){e.props.newState({settings:!1}),document.querySelector(".main_page").classList.remove("main_page--settAnim","main_page--settAnim--back")}),700),document.querySelector("nav").classList.remove("nav--out"),document.querySelector(".main_page").classList.add("main_page--settAnim--back"),setTimeout((function(){return document.querySelector(".settings--hook").style.pointerEvents="auto"}),800)}},{key:"tips",value:function(){this.props.newState({tips:!this.props.state.tips})}},{key:"componentDidMount",value:function(){document.querySelector(".settings_page").style.height=document.querySelector(".main_page").clientHeight+"px",document.querySelector("nav").classList.add("nav--out");var e=document.querySelector(".main_page").classList;e.remove("main_page--settAnim","main_page--settAnim--back"),e.toggle("main_page--settAnim"),setTimeout((function(){return document.querySelector(".main_page--hook_sett").style.pointerEvents="auto"}),700)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"settings_page"},r.a.createElement("h1",{className:"display-4"},r.a.createElement("small",null,"Settings")),r.a.createElement("div",{className:"main_page--hook_sett",onMouseOver:this.mainPage},"Main_Page"),r.a.createElement("div",{className:"settings--inside"},r.a.createElement(De.a,{style:{marginLeft:"5em"},id:"tips"},r.a.createElement(Be.a,{type:"checkbox",onClick:this.tips,defaultChecked:this.props.state.tips}),"Tips switch"),r.a.createElement(Fe.a,{target:"tips",placement:"right"},"Tips on hover on the interface"),r.a.createElement(Ke,null))))}}]),a}(r.a.Component),Ue=Object(b.b)(d,g)(Ge),He=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).mainPage=n.mainPage.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"mainPage",value:function(){var e=this;document.querySelector(".main_page--hook_info").style.pointerEvents="none",setTimeout((function(){e.props.newState({info:!1})}),700),document.querySelector("nav").classList.remove("nav--out"),setTimeout((function(){document.querySelector(".info--hook").style.pointerEvents="auto"}),800),document.querySelector(".info_page").classList.add("info_page--infoAnim--back")}},{key:"componentDidMount",value:function(){document.querySelector(".info_page").style.height=document.querySelector(".main_page").clientHeight+"px",document.querySelector(".info_page").classList.add("info_page--infoAnim"),document.querySelector("nav").classList.add("nav--out"),setTimeout((function(){document.querySelector(".main_page--hook_info").style.pointerEvents="auto"}),700)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"info_page"},r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"main_page--hook_info",onMouseOver:this.mainPage},"Main_Page"),r.a.createElement("h1",{className:"display-4"},"Info")))))}}]),a}(r.a.Component),ze=Object(b.b)(d,g)(He),Qe=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header__page"},r.a.createElement("header",null,r.a.createElement("h1",{className:"display-4"},"Welcome to ",r.a.createElement("strong",null,"Score Gym"))),r.a.createElement("img",{href:"#",alt:"header img placeholder"})))}}]),a}(r.a.Component),Xe=[],We=[{half:1.3333333333333333,quarter:.6666666666666666,eighth:.3333333333333333,sixteenth:.16666666666666666,thirty:.08333333333333333},{quarter:.8,eighth:.4,sixteenth:.2,thirty:.1}],Je=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={bars:[],barsQuant:8,measure:"four_quarters",pauseValue:10,easyOBProb:20,tripletValue:90,groupRest:!0,bpm:70,fixingBeatProb:70,easyGrouping:95,linkIns:!0,linkOut:50,lvl:2,simpleK:50,dotsK:-.1,groupK:60,beat:!0,beatNumb:!0,beamNum:1,receivedVal:[],showBeat:!1,noteValues:{whole:5,half:11,quarter:15,eighth:35,sixteenth:36,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},groupingValues:{whole:-.1,half:3,quarter:10,eighth:12},simValIns:{whole:-.1,half:5,quarter:15,eighth:20,sixteenth:25,thirtySecond:0},quintepletMap:{whole:-.1,half:5,quarter:15,eighth:0},metronomeSwitch:!1,mistakes:null,beatReadN:null,mode:null,tips:!0},n.tick01=r.a.createRef(),n.tick02=r.a.createRef(),n.note01=r.a.createRef(),n.new=r.a.createRef(),n.beatShow=r.a.createRef(),n.num=r.a.createRef(),n.clearScores=r.a.createRef(),n.beginner=n.beginner.bind(Object(u.a)(n)),n.intermediate=n.intermediate.bind(Object(u.a)(n)),n.expert=n.expert.bind(Object(u.a)(n)),n.nextGen=n.nextGen.bind(Object(u.a)(n)),n.beat=n.beat.bind(Object(u.a)(n)),n.beatNumb=n.beatNumb.bind(Object(u.a)(n)),n.beatReading=n.beatReading.bind(Object(u.a)(n)),n.beatReadingFunc=n.beatReadingFunc.bind(Object(u.a)(n)),n.stop=n.stop.bind(Object(u.a)(n)),n.beatInput=n.beatInput.bind(Object(u.a)(n)),n.beatInputFunc=n.beatInputFunc.bind(Object(u.a)(n)),n.beatInputListener=n.beatInputListener.bind(Object(u.a)(n)),n.settings=n.settings.bind(Object(u.a)(n)),n.info=n.info.bind(Object(u.a)(n)),n.scrollHUD=n.scrollHUD.bind(Object(u.a)(n)),n.clearBars=n.clearBars.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"beginner",value:function(){var e=this;this.setState({barsQuant:4,measure:"four_quarters",pauseValue:5,easyOBProb:50,bpm:50,linkIns:!0,linkOut:0,lvl:0,beamNum:1,groupRest:!1,settings:!1,noteValues:{whole:10,half:15,quarter:44,eighth:56,sixteenth:0,thirtySecond:0},mode:1,tips:this.props.state.tips}),setTimeout((function(){return e.props.updateState(e.state)}),50),setTimeout((function(){return ge(e.state)}),50)}},{key:"intermediate",value:function(){var e=this;this.setState({barsQuant:8,measure:"four_quarters",pauseValue:10,easyOBProb:35,bpm:70,linkIns:!0,linkOut:50,lvl:1,beamNum:1,groupRest:!0,settings:!1,noteValues:{whole:5,half:11,quarter:44,eighth:56,sixteenth:64,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},simpleK:75,dotsK:95,mode:2,tips:this.props.state.tips}),setTimeout((function(){return e.props.updateState(e.state)}),50),setTimeout((function(){return ge(e.state)}),50)}},{key:"expert",value:function(){var e=this;this.setState({barsQuant:16,measure:"four_quarters",pauseValue:10,easyOBProb:17,bpm:90,linkIns:!1,linkOut:70,lvl:2,beamNum:1,groupRest:!0,settings:!1,noteValues:{whole:5,half:11,quarter:20,eighth:56,sixteenth:64,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},groupingValues:{whole:-.1,half:3,quarter:10,eighth:12},quintepletMap:{whole:-.1,half:5,quarter:15,eighth:0},easyGrouping:95,tripletValue:90,simpleK:75,dotsK:80,groupK:100,mode:3,tips:this.props.state.tips}),setTimeout((function(){return e.props.updateState(e.state)}),50),setTimeout((function(){return ge(e.state)}),50)}},{key:"settings",value:function(){document.querySelector(".settings--hook").style.pointerEvents="none",this.props.newState({settings:!this.props.state.settings}),this.state.metronomeSwitch&&setTimeout(this.stop,300)}},{key:"info",value:function(){document.querySelector(".info--hook").style.pointerEvents="none",this.props.newState({info:!this.props.state.info}),this.state.metronomeSwitch&&setTimeout(this.stop,300)}},{key:"nextGen",value:function(){var e=this;this.new.current.blur(),this.setState({mistakes:null}),console.clear(),qe=0;var t,a=[];switch(this.setState({bars:be()}),setTimeout((function(){e.state.bars.forEach((function(e){e.forEach((function(e){if(/triplet/.test(e[0])?t=0:/quinteplet/.test(e[0])&&(t=1),!/triplet|quinteplet/.test(e[0])&&Array.isArray(e))if(Array.isArray(e[0]))for(var n in e)a.push([e[n][0],We[t][e[n][0].match(/[a-z]+/).join("")]]);else a.push([e[0],e[1]])}))})),e.setState({receivedVal:a})}),50),this.state.mode){case 1:this.setState({beat:!0,beatNumb:!0});break;case 2:this.setState({beat:!0,beatNumb:!1});break;case 3:this.setState({beat:!1,beatNumb:!1});break;default:return}}},{key:"beat",value:function(){this.beatShow.current.blur(),this.setState({beat:!this.state.beat})}},{key:"beatNumb",value:function(){this.num.current.blur(),this.setState({beatNumb:!this.state.beatNumb})}},{key:"beatReading",value:function(e){var t=this;this.setState({metronomeSwitch:!0}),this.setState({mistakes:null}),Ve=0,we=[],_e=!1,ke=0,Ne=0,Se=0;var a=0;if((ye=Array.from(document.querySelectorAll(".value"))).shift(),this.tick01.current.volume=.3,this.tick02.current.volume=.2,qe=_[this.props.state.measure]/(this.props.state.bpm/60)*1e3,this.tick01.current.play(),a+=qe/_[this.props.state.measure],"input"===e){for(we.push(setInterval((function(){t.tick01.current.play()}),qe));a<qe;)we.push(setTimeout((function(){t.tick02.current.play(),we.push(setInterval((function(){return t.tick02.current.play()}),qe))}),a)),a+=qe/_[this.props.state.measure];we.push(setTimeout(this.stop,(this.props.state.barsQuant+1)*qe-50))}else for(;a<qe;)we.push(setTimeout((function(){t.tick02.current.play()}),a)),a+=qe/_[this.props.state.measure];"input"===e?we.push(setTimeout(this.beatInputFunc,qe-100)):(we.push(setTimeout(this.beatReadingFunc,qe)),Ve--)}},{key:"beatReadingFunc",value:function(){var e=this;if(Ne>_[this.props.state.measure]-.1&&(Ne=0),Ne===_[this.props.state.measure]&&(Ne=0),ke||(ye[0].classList.toggle("value--animation"),/--rest/.test(ye[ke].className)||(Xe[0].play(),Se++),ve=setTimeout(this.beatReadingFunc,1e3*this.state.receivedVal[ke][1]/(this.props.state.bpm/60))),console.log(Ne),!Ne||!ke){var t=0,a=_[this.props.state.measure]/(this.props.state.bpm/60)*1e3;for(this.tick01.current.play(),t+=a/_[this.props.state.measure];t<a;)we.push(setTimeout((function(){e.tick02.current.play()}),t)),t+=a/_[this.props.state.measure];if(!ke)return Ne+=this.state.receivedVal[ke][1],void ke++}ke<ye.length-1?ve=setTimeout(this.beatReadingFunc,1e3*this.state.receivedVal[ke][1]/(this.props.state.bpm/60)):setTimeout(this.stop,1e3*this.state.receivedVal[ke][1]/(this.props.state.bpm/60)),ye[ke].classList.toggle("value--animation"),/--rest/.test(ye[ke].className)||ke&&/^[\d]/.test(this.state.receivedVal[ke-1][0])||Xe[Se].play(),Ne+=this.state.receivedVal[ke][1],ke++,++Se===Xe.length-1&&(Se=0)}},{key:"beatInput",value:function(){0,this.props.newState({metronomeSwitch:!0}),document.addEventListener("keydown",this.beatInputListener),this.beatReading("input")}},{key:"beatInputListener",value:function(){!_e||/--rest/.test(ye[ke].className)||0!==ke&&/^[\d]/.test(this.state.receivedVal[ke-1][0])?(!_e||_e&&(/--rest/.test(ye[ke].className)||0===ke||/^[\d]/.test(this.state.receivedVal[ke-1][0])))&&(Ve++,_e=!1):(ye[ke].classList.toggle("value--animation"),_e=!1)}},{key:"beatInputFunc",value:function(){var e=this;_e=!0,we.push(setTimeout((function(){!_e||/--rest/.test(ye[ke].className)||0!==ke&&/^[\d]/.test(e.state.receivedVal[ke-1][0])||Ve++,ke++,_e=!1}),1e3*this.state.receivedVal[ke][1]/(this.props.state.bpm/60)*90/100)),ke<ye.length-1&&(ve=setTimeout(this.beatInputFunc,1e3*this.state.receivedVal[ke][1]/(this.props.state.bpm/60)))}},{key:"stop",value:function(e){for(var t in this.props.state.info||this.props.state.settings||e||this.setState({mistakes:Ve}),document.removeEventListener("keydown",this.beatInputListener),this.setState({metronomeSwitch:!1}),we)clearTimeout(we[t]),clearInterval(we[t]);for(var a in ye)ye[a].classList.contains("value--animation")&&ye[a].classList.toggle("value--animation");clearTimeout(ve)}},{key:"scrollHUD",value:function(){document.addEventListener("scroll",(function(){var e=document.querySelector(".main_page").offsetTop;window.scrollY>e/4?document.querySelector("nav").classList.add("nav--sticky"):document.querySelector("nav").classList.remove("nav--sticky")}))}},{key:"clearBars",value:function(){this.setState({bars:[]}),this.clearScores.current.blur()}},{key:"componentDidMount",value:function(){ge(this.props.state);for(var e=0;e<20;e++){var t=this.note01.current;t.volume=.2,Xe.push(t);var a=t.cloneNode(!0);a.volume=.2,Xe.push(a)}this.scrollHUD()}},{key:"render",value:function(){var e=this,t=this.state.bars;return r.a.createElement("div",null,r.a.createElement("div",{style:{overflow:"hidden"}},r.a.createElement(Qe,null),r.a.createElement("div",{style:{position:"relative"}},this.props.state.info?r.a.createElement(ze,null):null,this.props.state.settings?r.a.createElement(Ue,null):null),r.a.createElement("nav",null,r.a.createElement("div",{className:"nav--hook--inv"}),r.a.createElement("div",{className:"nav--hook"}),r.a.createElement("div",{className:"button__holder"},r.a.createElement("div",{className:"btn-group m-1"},r.a.createElement("button",{disabled:1===this.props.state.mode||this.state.metronomeSwitch,className:"btn btn-dark",onClick:this.beginner},r.a.createElement("span",{id:"beginner"},"Beginner")),this.props.state.tips?r.a.createElement(Fe.a,{target:"beginner",placement:"top"},"Only simple values"):null,r.a.createElement("button",{disabled:2===this.props.state.mode||this.state.metronomeSwitch,className:"btn btn-dark",onClick:this.intermediate},r.a.createElement("span",{id:"intermediate"},"Intermediate")),this.props.state.tips?r.a.createElement(Fe.a,{target:"intermediate",placement:"top"},"+ dotted values"):null,r.a.createElement("button",{disabled:3===this.props.state.mode||this.state.metronomeSwitch,className:"btn btn-dark",onClick:this.expert},r.a.createElement("span",{id:"expert"},"Expert")),this.props.state.tips?r.a.createElement(Fe.a,{target:"expert",placement:"top"},"+ triplets and quinteplets"):null),r.a.createElement("button",{disabled:!this.state.bars.length||this.state.metronomeSwitch,className:"btn btn-dark btn-sm btn__clear",onClick:this.clearBars,ref:this.clearScores},r.a.createElement("span",{id:"clearScores"},"\u2715")),this.props.state.tips?r.a.createElement(Fe.a,{target:"clearScores",placement:"right"},"Clear the score board"):null,r.a.createElement("br",null),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-dark",onClick:this.nextGen,disabled:this.state.metronomeSwitch,ref:this.new},r.a.createElement("span",{id:"new"},"New")),this.props.state.tips?r.a.createElement(Fe.a,{target:"new",placement:"top"},"Generate new bars"):null,r.a.createElement("button",{className:"btn btn-dark",onClick:this.beat,ref:this.beatShow},r.a.createElement("span",{id:"beat"},"Beat")),this.props.state.tips?r.a.createElement(Fe.a,{target:"beat",placement:"top"},"Show the position of beat"):null,r.a.createElement("button",{className:"btn btn-dark",disabled:!this.state.beat,onClick:this.beatNumb,ref:this.num},r.a.createElement("span",{id:"num"},"Num")),this.props.state.tips?r.a.createElement(Fe.a,{target:"num",placement:"top"},"Show the number of the beat"):null,r.a.createElement("button",{className:"btn btn-dark",onClick:this.beatReading,disabled:this.state.bars.length<1||this.state.metronomeSwitch},r.a.createElement("span",{id:"reading"},"Reading")),this.props.state.tips?r.a.createElement(Fe.a,{target:"reading",placement:"top"},"Listen to the rhytm"):null,r.a.createElement("button",{className:"btn btn-dark",onClick:this.stop,disabled:!this.state.metronomeSwitch},r.a.createElement("span",{id:"stop"},"Stop")),this.props.state.tips?r.a.createElement(Fe.a,{target:"stop",placement:"top"},"Stop metronome"):null,r.a.createElement("button",{className:"btn btn-dark",onClick:this.beatInput,disabled:this.state.bars.length<1||this.state.metronomeSwitch},r.a.createElement("span",{id:"practice"},"Practice")),this.props.state.tips?r.a.createElement(Fe.a,{target:"practice",placement:"top"},"Play note values with your keyboard (any key)"):null))),r.a.createElement("div",{className:"main_page"},r.a.createElement("div",null,r.a.createElement("audio",{ref:this.tick01},r.a.createElement("source",{src:E.a,type:"audio/mpeg"})),r.a.createElement("audio",{ref:this.tick02},r.a.createElement("source",{src:y.a,type:"audio/mpeg"})),r.a.createElement("audio",{ref:this.note01},r.a.createElement("source",{src:S.a,type:"audio/mpeg"}))),r.a.createElement("div",{className:"settings--hook",onMouseOver:this.settings},"Settings"),r.a.createElement("div",{className:"info--hook",onMouseOver:this.info},"Info"),r.a.createElement("div",{className:"score_body"},r.a.createElement("div",{className:"score"},t.map((function(a,n){var s=0,l=0;return r.a.createElement("div",{className:t.length-1===n?"bar bar_last":0===n?"bar bar_first":"bar",key:String(n)},r.a.createElement("div",{className:"bar__inside"},a.map((function(t,i){if(i+1<=a.length-1&&Array.isArray(a[i+1][0]))return s+=t[1],r.a.createElement("div",{style:{position:"relative",height:"118px"},key:String(n)+"_"+i},r.a.createElement("span",{className:"tuplet__num"},/triplet/.test(t[0])?3:5),(0===i&&Array.isArray(t)||1===i&&s===t[1]||Number.isInteger(s-t[1])||i===a.length-1&&t[1]===e.state.beamNum)&&l<_[e.props.state.measure]?r.a.createElement("div",{key:s+t[0],className:"beat",style:e.state.beat?/rest|whole/.test(t[0])?{opacity:"100%",top:"100%",left:"5px"}:/--end/.test(t[0])?{opacity:"100%",left:"10px"}:{opacity:"100%"}:{opacity:"0%"}},r.a.createElement("div",{style:e.state.beatNumb?{opacity:"1"}:{opacity:"0"}},s-t[1]+1),r.a.createElement("span",{style:{display:"none"}},l++)):null,r.a.createElement("div",{className:/triplet/.test(t[0])?"triplet":"quinteplet"},a[i+1].map((function(e,t){return t?t===a[i+1].length-1?r.a.createElement("div",{className:"value "+e[0],style:{marginRight:"0"},key:e[0]+String(n)+t}):r.a.createElement("div",{className:"value "+e[0],key:e[0]+String(n)+t}):r.a.createElement("div",{className:"value "+e[0],style:{marginLeft:"0"},key:e[0]+String(n)+t})}))));if(!Array.isArray(t[0])){var c,u=null;if(Array.isArray(t)&&("0"===t[0][0]||"1"===t[0][0])){var o=t[0].split("");u=Number(o.slice(0,1)),t[0]=o.join("")}if(Array.isArray(t)){var m=t[0].split("");m.reverse(),c=m.slice(0,3).join(""),s+=t[1]}return r.a.createElement("div",{className:Array.isArray(t)?"value "+t[0].match(/\D+[\d]*.+/).join(""):"value  "+e.props.state.measure,key:n+i+t[0]},r.a.createElement(Ye,{link:u,ch:c,ind:i,bars:e.state.bars}),(0===i&&Array.isArray(t)||1===i&&s===t[1]||Number.isInteger(s-t[1])||i===a.length-1&&t[1]===e.state.beamNum)&&l<_[e.props.state.measure]?r.a.createElement("div",{key:s+t[0],className:"beat",style:e.state.beat?/rest|whole/.test(t[0])?{opacity:"100%",top:"100%",left:"5px"}:/--end/.test(t[0])?{opacity:"100%",left:"10px"}:{opacity:"100%"}:{opacity:"0%"}},r.a.createElement("div",{style:e.state.beatNumb?{opacity:"1"}:{opacity:"0"}},s-t[1]+1),r.a.createElement("span",{style:{display:"none"}},l++)):null)}}))))}))),r.a.createElement("div",{className:"mistakes",style:{opacity:null!==this.state.mistakes&&Ve>=0&&this.state.bars.length?"1":"0"}},"Mistakes: ",this.state.mistakes)))))}}]),a}(r.a.Component),Ye=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"shouldComponentUpdate",value:function(e){return this.props.bars!==e.bars}},{key:"render",value:function(){var e=null;return"dne"===this.props.ch&&0===this.props.link&&(e={left:"38px",width:"15px",top:"-21px",height:"40px"}),r.a.createElement("div",null,null!==this.props.link?r.a.createElement("div",{style:e,key:this.props.ch+this.props.ind,className:0===this.props.link?"linked_in":"linked_out"}):null)}}]),a}(r.a.Component),$e=Object(b.b)(d,g)(Je);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ze=a(18),et=Object(Ze.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=Object(h.a)({},e);switch(t.type){case"CHANGE":var n=Object.keys(t.newState);return a[n]=t.newState[n],a;case"UPDATE":return t.newState;default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(r.a.createElement(b.a,{store:et},r.a.createElement(r.a.StrictMode,null,r.a.createElement($e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.b3f2ad34.chunk.js.map