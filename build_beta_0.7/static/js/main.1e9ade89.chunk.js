(this.webpackJsonpscore_gym=this.webpackJsonpscore_gym||[]).push([[0],{40:function(e,t,a){e.exports=a.p+"static/media/metro_1.14d657e7.mp3"},41:function(e,t,a){e.exports=a.p+"static/media/metro_other.29b77406.mp3"},42:function(e,t,a){e.exports=a.p+"static/media/clap01.3019756d.mp3"},46:function(e,t,a){e.exports=a(79)},51:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(11),i=a.n(r),o=(a(51),a(7)),l=a(8),u=a(2),c=a(10),h=a(9),p=a(45),m={bars:[],barsQuant:8,measure:"four_quarters",pauseValue:10,easyOBProb:20,tripletValue:90,groupRest:!0,bpm:70,easyGrouping:95,linkIns:!0,linkOut:50,lvl:2,simpleK:50,dotsK:-.1,groupK:60,beat:!0,beatNumb:!0,beamNum:1,receivedVal:[],noteValues:{whole:5,half:11,quarter:15,eighth:35,sixteenth:36,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},groupingValues:{whole:-.1,half:3,quarter:10,eighth:12},simValIns:{whole:-.1,half:5,quarter:15,eighth:20,sixteenth:25,thirtySecond:0},metronomeSwitch:!1,mistakes:null,mode:null,settings:!1,info:!1,tips:!0},d=function(e){return{state:e}},b=function(e){return{newState:function(t){e(function(e){return{type:"CHANGE",newState:e}}(t))},updateState:function(t){e(function(e){return{type:"UPDATE",newState:e}}(t))}}},f=a(12),g=a(40),v=a.n(g),y=a(41),E=a.n(y),k=a(42),S=a.n(k),w=a(26),N=[[["whole","whole--rest",4],["half","half--rest",2],["quarter","quarter--rest",1],["eighth","eighth--rest",.5],["sixteenth","sixteenth--rest",.25],["thirty-second","thirty-second--rest",.125]]].concat([[["whole--dot","whole--dot--rest",6],["half--dot","half--dot--rest",3],["quarter--dot","quarter--dot--rest",1.5],["eighth--dot","eighth--dot--rest",.75],["sixteenth--dot","sixteenth--dot--rest",.375],["thirty-second--dot","thirty-second--dot--rest",.1875]]]);N=N.concat([[["whole--triplet","whole--quinteplet",4],["half--triplet","half--quinteplet",2],["quarter--triplet","quarter--quinteplet",1],["eighth--triplet","eighth--quinteplet",.5]]]);var _={two_quarters:2,three_quarters:3,four_quarters:4,five_quarters:5,seven_quarters:7,five_eights:2.5,six_eights:3},O=[/eighth|sixteenth|thirty-second/,/rest/],q=1,j=4,x=[],V=4,I=10,A=20,T=90,R=100,M=!0,L=0,C=0,P=!0,D=!1,B={whole:5,half:11,quarter:44,eighth:56,sixteenth:64,thirtySecond:0},K=Object.keys(B),G=[],F=null,U={whole:-.1,half:-.1,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},H=Object.keys(U),Q=[],X=null,W={whole:-.1,half:3,quarter:10,eighth:12},J=Object.keys(W),z=[],Y=null,$=null,Z={whole:-.1,half:5,quarter:15,eighth:20,sixteenth:25,thirtySecond:30},ee=Object.keys(Z),te=[],ae=null,ne=0,se=0,re=0,ie=75,oe=95,le=100,ue=null,ce=[ie,oe,le];function he(e){for(var t in q=e.beamNum,j=e.barsQuant,V=_[e.measure],I=e.pauseValue,A=e.easyOBProb,T=e.tripletValue,R=e.easyGrouping,M=e.linkIns,L=e.linkOut,C=e.lvl,ie=e.simpleK,oe=e.dotsK,le=e.groupK,P=e.groupRest,D=e.showBeat,B=e.noteValues,G=[],F=null,K)0!==B[K[t]]&&(G.push([K[t]]),G[t].push(B[K[t]]));for(var a in F=G.reverse()[0][1],G.reverse(),U=e.dottedValues,Q=[],X=null,H)0!==U[H[a]]&&(Q.push([H[a]]),Q[a].push(U[H[a]]));for(var n in X=Q.reverse()[0][1],Q.reverse(),W=e.groupingValues,z=[],Y=null,J)0!==W[J[n]]&&(z.push([J[n]]),z[n].push(W[J[n]]));for(var s in Y=z.reverse()[0][1],z.reverse(),Z=e.simValIns,te=[],ae=null,ee)0!==Z[ee[s]]&&(te.push([ee[s]]),te[s].push(Z[ee[s]]));ae=te.reverse()[0][1],te.reverse(),$=[[G,F],[Q,X],[z,Y]],ce=[ie,oe,le],ue=0===C?ie-1:1===C?oe-1:100}function pe(){var e=[];x=[];for(var t=function(){var t=V-re,a=Math.round(Math.random()*ue);ne=null,ce.forEach((function(e,n){a<e&&!ne&&0!==ne&&t>=N[n][$[n][0].length-1][2]?ne=n:ne||0===ne||n!==$.length-1||(ne=0)})),!Number.isInteger(re)&&2===ne&&oe>ie&&t>=N[1][$[1][0].length-1][2]?ne=1:!Number.isInteger(re)&&2===ne&&oe<ie&&(ne=0);var n=null,s=null;N[ne].forEach((function(e,a){e[2]<=t&&!n&&0!==n&&(n=a,s=a)}));var r=V-re<=1&&x.length+1<j&&L&&2!==ne?Math.round(100*Math.random()):null;r<L&&r&&(n=1),me(n,re,ne);var i=function(){if("whole--triplet"===N[ne][0][0]){return Math.round(100*Math.random())<=T?0:1}if(Math.round(100*Math.random())<I)return 1;return 0}(),o=N[ne][se][2]-t;if(V-re<=1&&!N[0].some((function(e){return e[2]===o}))&&!N[1].some((function(e){return e[2]===o}))&&2!==ne&&o>0&&(se=s),re+N[ne][se][2]>V){var l=function(e,t,a,n,s){var r=V-s,i=0,o=null;for(;V-s;){var l=i?0:1;if(N[l].forEach((function(e,t){e[2]!==r||o||0===o||(o=t)})),i++,o){e.push([(0===n?"1":"")+N[l][o][n],N[l][o][2]]);e=de(0,0,[],e),t.push(e),s+=N[l][o][2]}}e=[],s=0,i=0;for(;s!==N[ne][a][2]-r;){o=null;var u=i?0:1;N[u].forEach((function(e,t){e[2]!==N[ne][a][2]-r||o||0===o||(o=t)})),i++,o&&(e.push([N[u][o][n],N[u][o][2]]),s+=N[u][o][2])}return[e,t,s]}(e,x,se,i,re),u=Object(w.a)(l,3);e=u[0],x=u[1],re=u[2]}else if(M&&!Number.isInteger(N[ne][se][2]+re)&&!Number.isInteger(re)&&re+N[ne][se][2]<=V&&N[ne][se][2]+re>Math.ceil(re)&&G.length<6&&2!==ne){var c=function(e,t,a,n,s){var r=Math.ceil(s)-s,i=0,o=null,l=0,u=function(){var e=l?0:1;N[e].forEach((function(a,l){!o&&0!==o&&N[e][l][2]<=r&&(e&&l<4||!e)&&(o=l,t.push([(0===n?"0":"")+N[e][o][n],N[e][o][2]]),r-=N[e][o][2],s+=N[e][o][2],i+=N[e][o][2])})),l++};for(;r>0;)u();r=N[e][a][2]-i,l=0,o=null;var c=function(){(r>1||l>1)&&N[0].forEach((function(e,a){!o&&0!==o&&N[0][a][2]<=r&&(o=a,t.push([N[0][o][n],N[0][o][2]]),r-=N[0][o][2],s+=N[0][o][2],o=null)}));var e=l?0:1;N[e].forEach((function(a,i){!o&&0!==o&&N[e][i][2]<=r&&(e&&i<4||!e)&&(o=i,t.push([N[e][o][n],N[e][o][2]]),r-=N[e][o][2],s+=N[e][o][2],o=null)})),l++};for(;r>0;)c();return[t,s]}(ne,e,se,i,re),h=Object(w.a)(c,2);e=h[0],re=h[1]}else e.push([N[ne][se][i],N[ne][se][2]]),re+=N[ne][se][2];if("whole--triplet"===N[ne][0][0]){var p=[];!function(e,t,a,n){var s;s=a?N[e][t][2]/4*5:N[e][t][2]/2*3;var r=null,i=0,o=Math.round(100*Math.random())-1,l=function(){var e=s-i,t=null,l=void 0;if(N[0].forEach((function(a,n){a[2]<=e&&!t&&0!==t&&(t=n,r||(r=n))})),o<R)l=t=a?r+2:r+1;else{l=me(t,i,0,1)}n.push([N[0][l][0],N[0][l][2]]),i+=N[0][l][2]};for(;i<s;)l()}(ne,se,i,p),e.push(p)}if(String(V-re).length>3&&100*Math.random()<=70&&N[0].forEach((function(t){(t[2]+re===Math.ceil(re)||t[2]+re===Math.ceil(re)-q/2)&&String(V-re).length>3&&(e.push([t[0],t[2]]),re+=t[2])})),re===V){e=de(0,0,[],e),x.push(e),e=[],re=0}};x.length<j;)t();return x[0].unshift(V),x}function me(e,t,a,n){var s,r=n?ae:$[a][1];se=0;var i=$[a][0];if(0===e?s=0:n||(s=Math.round($[a][0][e-1][1])),Number.isInteger(t)&&$[a][0].length>e+2&&!n){var o=Math.round(100*Math.random());0===t&&o-30<A&&$[a][0].length>e+3?r=$[a][0][e+3][1]:o<A&&(r=$[a][0][e+2][1])}n&&(s=0===e?0:te[e-1][1],i=te);var l=Math.random()*(r-s)+s;for(var u in i)if(l<i[u][1])return se=Number(u);return se=e}function de(e,t,a,n,s){var r=0;return n.forEach((function(i,o){if(e+=i[1],Array.isArray(i[0]))return i=de(0,0,[],i,!0),r=0,t=0,void(a=[]);if(O[0].test(i[0])&&!O[1].test(i[0])?(t+=i[1],a.push(i[0])):(t=0,a=[]),(t>q||t===q&&!a.some((function(e){return/sixteenth|thirty-second/.test(e)})))&&(t=0,a=[]),/rest/.test(i[0])){var l=null;o+1<=n.length-1&&/rest/.test(n[o+1][0])&&P&&(N.forEach((function(t){return t.forEach((function(t){t[2]!==i[1]+n[o+1][1]||l||(n[o][0]=t[1],n[o][1]=t[2],e+=n[o+1][1],l=!0)}))})),l&&n.splice(o+1,1))}else{if(!O[0].test(i[0]))return;if(O[1].test(i[0]))return;o+1<=n.length-1&&O[0].test(n[o+1][0])&&!O[1].test(n[o+1][0])&&!/triplet|quinteplet/.test(n[o][0])&&(t!==i[1]||e===V/2||0!==o&&/--st|--gr/.test(n[o-1][0])&&!Array.isArray(n[o-1][0])||0!==o&&/rest/.test(n[o-1][0])&&Number.isInteger(e)&&D||!(o<=n.length-1)||/triplet|quinteplet/.test(n[o+1][0])?o>0&&/--st|--gr/.test(n[o-1][0])&&(e!==V/2&&t!==q||s)&&r&&o<=n.length-1&&!/triplet|quinteplet/.test(n[o+1][0])&&(/eighth/.test(i[0])?n[o][0]=n[o][0]+"--gr":new RegExp(i[0].match(/\D/g).join("")).test(n[o+1][0])||new RegExp(i[0].match(/\D/g).join("")).test(n[o-1][0])||/sixteenth|thirty-second/.test(i[0])&&/sixteenth|thirty-second/.test(n[o+1][0])?new RegExp(i[0].match(/\D/g).join("")).test(n[o+1][0])||/sixteenth|thirty-second/.test(i[0])&&/sixteenth|thirty-second/.test(n[o+1][0])?n[o][0]=n[o][0]+"--1--gr":n[o][0]=n[o][0]+"--0--gr":n[o][0]=n[o][0]+"--2--gr",r++):(/eighth/.test(i[0])?n[o][0]=n[o][0]+"--st":new RegExp(i[0].match(/\D/g).join("")).test(n[o+1][0])||/sixteenth|thirty-second/.test(i[0])&&/sixteenth|thirty-second/.test(n[o+1][0])?n[o][0]=n[o][0]+"--1--st":n[o][0]=n[o][0]+"--0--st",r++)),!/--st|--gr/.test(i[0])&&o>0&&/--st|--gr/.test(n[o-1][0])&&r&&(o===n.length-1||t===q||e===V/2||!O[0].test(n[o+1][0])||O[1].test(n[o+1][0])||/triplet|quinteplet/.test(n[o+1][0]))&&(/eighth/.test(i[0])?n[o][0]=n[o][0]+"--end":new RegExp(i[0].match(/\D/g).join("")).test(n[o-1][0])?n[o][0]=n[o][0]+"--1--end":n[o][0]=n[o][0]+"--0--end",t=0,a=[],r=0),/--st|--gr|--end/.test(i[0])||(t=0,a=[])}})),n}var be,fe,ge,ve,ye,Ee,ke,Se,we,Ne=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).mainPage=n.mainPage.bind(Object(u.a)(n)),n.tips=n.tips.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"mainPage",value:function(){var e=this;setTimeout((function(){e.props.newState({settings:!1}),document.querySelector(".main_page").classList.remove("main_page--settAnim","main_page--settAnim--back")}),700),document.querySelector("nav").classList.remove("nav--out"),document.querySelector(".main_page").classList.add("main_page--settAnim--back"),setTimeout((function(){return document.querySelector(".settings--hook").style.pointerEvents="auto"}),800)}},{key:"tips",value:function(){this.props.newState({tips:!this.props.state.tips})}},{key:"componentDidMount",value:function(){document.querySelector(".settings_page").style.height=document.querySelector(".main_page").clientHeight+"px",document.querySelector("nav").classList.add("nav--out");var e=document.querySelector(".main_page").classList;e.remove("main_page--settAnim","main_page--settAnim--back"),e.toggle("main_page--settAnim"),setTimeout((function(){return document.querySelector(".main_page--hook_sett").style.pointerEvents="auto"}),700)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"settings_page"},s.a.createElement("div",{className:"main_page--hook_sett",onMouseOver:this.mainPage},"Main_Page"),s.a.createElement("h1",{className:"display-4"},s.a.createElement("smal",null,"Settings")),s.a.createElement("button",{class:"btn btn-info",onClick:this.tips},"Tips switch")))}}]),a}(s.a.Component),_e=Object(f.b)(d,b)(Ne),Oe=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).mainPage=n.mainPage.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"mainPage",value:function(){var e=this;document.querySelector(".main_page--hook_info").style.pointerEvents="none",setTimeout((function(){e.props.newState({info:!1})}),700),document.querySelector("nav").classList.remove("nav--out"),setTimeout((function(){document.querySelector(".info--hook").style.pointerEvents="auto"}),800),document.querySelector(".info_page").classList.add("info_page--infoAnim--back")}},{key:"componentDidMount",value:function(){document.querySelector(".info_page").style.height=document.querySelector(".main_page").clientHeight+"px",document.querySelector(".info_page").classList.add("info_page--infoAnim"),document.querySelector("nav").classList.add("nav--out"),setTimeout((function(){document.querySelector(".main_page--hook_info").style.pointerEvents="auto"}),700)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"info_page"},s.a.createElement("div",{className:"info"},s.a.createElement("div",{className:"main_page--hook_info",onMouseOver:this.mainPage},"Main_Page"),s.a.createElement("h1",{className:"display-4"},"Info"))))}}]),a}(s.a.Component),qe=Object(f.b)(d,b)(Oe),je=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"header__page"},s.a.createElement("header",null,s.a.createElement("h1",{className:"display-4"},"Welcome to ",s.a.createElement("strong",null,"Score Gym"))),s.a.createElement("img",{href:"#",alt:"header img"})))}}]),a}(s.a.Component),xe=a(82),Ve=[],Ie=[{half:1.3333333333333333,quarter:.6666666666666666,eighth:.3333333333333333,sixteenth:.16666666666666666,thirty:.08333333333333333},{quarter:.8,eighth:.4,sixteenth:.2,thirty:.1}],Ae=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={bars:[],barsQuant:8,measure:"four_quarters",pauseValue:10,easyOBProb:20,tripletValue:90,groupRest:!0,bpm:70,easyGrouping:95,linkIns:!0,linkOut:50,lvl:2,simpleK:50,dotsK:-.1,groupK:60,beat:!0,beatNumb:!0,beamNum:1,receivedVal:[],noteValues:{whole:5,half:11,quarter:15,eighth:35,sixteenth:36,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},groupingValues:{whole:-.1,half:3,quarter:10,eighth:12},simValIns:{whole:-.1,half:5,quarter:15,eighth:20,sixteenth:25,thirtySecond:0},metronomeSwitch:!1,mistakes:null,mode:null},n.tick01=s.a.createRef(),n.tick02=s.a.createRef(),n.note01=s.a.createRef(),n.new=s.a.createRef(),n.beatShow=s.a.createRef(),n.num=s.a.createRef(),n.clearScores=s.a.createRef(),n.beginner=n.beginner.bind(Object(u.a)(n)),n.intermediate=n.intermediate.bind(Object(u.a)(n)),n.expert=n.expert.bind(Object(u.a)(n)),n.nextGen=n.nextGen.bind(Object(u.a)(n)),n.beat=n.beat.bind(Object(u.a)(n)),n.beatNumb=n.beatNumb.bind(Object(u.a)(n)),n.beatReading=n.beatReading.bind(Object(u.a)(n)),n.beatReadingFunc=n.beatReadingFunc.bind(Object(u.a)(n)),n.stop=n.stop.bind(Object(u.a)(n)),n.beatInput=n.beatInput.bind(Object(u.a)(n)),n.beatInputFunc=n.beatInputFunc.bind(Object(u.a)(n)),n.beatInputListener=n.beatInputListener.bind(Object(u.a)(n)),n.settings=n.settings.bind(Object(u.a)(n)),n.info=n.info.bind(Object(u.a)(n)),n.scrollHUD=n.scrollHUD.bind(Object(u.a)(n)),n.clearBars=n.clearBars.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"beginner",value:function(){var e=this;this.setState({barsQuant:4,measure:"four_quarters",pauseValue:5,easyOBProb:50,bpm:50,linkIns:!0,linkOut:0,lvl:0,beamNum:1,groupRest:!1,settings:!1,noteValues:{whole:10,half:15,quarter:44,eighth:56,sixteenth:0,thirtySecond:0},mode:1}),setTimeout((function(){return e.props.updateState(e.state)}),50),setTimeout((function(){return he(e.props.state)}),50)}},{key:"intermediate",value:function(){var e=this;this.setState({barsQuant:8,measure:"four_quarters",pauseValue:10,easyOBProb:35,bpm:70,linkIns:!0,linkOut:50,lvl:1,beamNum:1,groupRest:!0,settings:!1,noteValues:{whole:5,half:11,quarter:44,eighth:56,sixteenth:64,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},simpleK:75,dotsK:95,mode:2}),setTimeout((function(){return e.props.updateState(e.state)}),50),setTimeout((function(){return he(e.props.state)}),50)}},{key:"expert",value:function(){var e=this;this.setState({barsQuant:16,measure:"four_quarters",pauseValue:10,easyOBProb:17,bpm:90,linkIns:!1,linkOut:70,lvl:2,beamNum:1,groupRest:!0,settings:!1,noteValues:{whole:5,half:11,quarter:20,eighth:56,sixteenth:64,thirtySecond:0},dottedValues:{whole:-.1,half:5,quarter:10,eighth:30,sixteenth:0,thirtySecond:0},groupingValues:{whole:-.1,half:3,quarter:10,eighth:12},easyGrouping:95,tripletValue:90,simpleK:75,dotsK:80,groupK:100,mode:3}),setTimeout((function(){return e.props.updateState(e.state)}),50),setTimeout((function(){return he(e.props.state)}),50)}},{key:"settings",value:function(){document.querySelector(".settings--hook").style.pointerEvents="none",this.props.newState({settings:!this.props.state.settings}),setTimeout(this.stop,300)}},{key:"info",value:function(){document.querySelector(".info--hook").style.pointerEvents="none",this.props.newState({info:!this.props.state.info}),setTimeout(this.stop,300)}},{key:"nextGen",value:function(){var e=this;this.new.current.blur(),this.setState({mistakes:null}),console.clear(),Se=0;var t,a=[];switch(this.setState({bars:pe()}),setTimeout((function(){e.state.bars.forEach((function(e){e.forEach((function(e){if(/triplet/.test(e[0])?t=0:/quinteplet/.test(e[0])&&(t=1),!/triplet|quinteplet/.test(e[0])&&Array.isArray(e))if(Array.isArray(e[0]))for(var n in e)a.push([e[n][0],Ie[t][e[n][0].match(/[a-z]+/).join("")]]);else a.push([e[0],e[1]])}))})),e.setState({receivedVal:a})}),50),this.state.mode){case 1:this.setState({beat:!0,beatNumb:!0});break;case 2:this.setState({beat:!0,beatNumb:!1});break;case 3:this.setState({beat:!1,beatNumb:!1});break;default:return}}},{key:"beat",value:function(){this.beatShow.current.blur(),this.setState({beat:!this.state.beat})}},{key:"beatNumb",value:function(){this.num.current.blur(),this.setState({beatNumb:!this.state.beatNumb})}},{key:"beatReading",value:function(e){var t=this;this.setState({metronomeSwitch:!0}),this.setState({mistakes:null}),we=0,Ee=[],ke=!1,ge=0,ye=0,ve=0;var a=0;if((fe=Array.from(document.querySelectorAll(".value"))).shift(),this.tick01.current.volume=.3,this.tick02.current.volume=.2,Se=_[this.props.state.measure]/(this.props.state.bpm/60)*1e3,this.tick01.current.play(),a+=Se/_[this.props.state.measure],"input"===e){for(Ee.push(setInterval((function(){t.tick01.current.play()}),Se));a<Se;)Ee.push(setTimeout((function(){t.tick02.current.play(),Ee.push(setInterval((function(){return t.tick02.current.play()}),Se))}),a)),a+=Se/_[this.props.state.measure];Ee.push(setTimeout(this.stop,(this.props.state.barsQuant+1)*Se-50))}else for(;a<Se;)Ee.push(setTimeout((function(){t.tick02.current.play()}),a)),a+=Se/_[this.props.state.measure];"input"===e?Ee.push(setTimeout(this.beatInputFunc,Se-100)):(Ee.push(setTimeout(this.beatReadingFunc,Se)),we--)}},{key:"beatReadingFunc",value:function(){var e=this;if(ye>_[this.props.state.measure]-.1&&(ye=0),ye===_[this.props.state.measure]&&(ye=0),ge||(fe[0].classList.toggle("value--animation"),/--rest/.test(fe[ge].className)||(Ve[0].play(),ve++),be=setTimeout(this.beatReadingFunc,1e3*this.state.receivedVal[ge][1]/(this.props.state.bpm/60))),console.log(ye),!ye||!ge){var t=0,a=_[this.props.state.measure]/(this.props.state.bpm/60)*1e3;for(this.tick01.current.play(),t+=a/_[this.props.state.measure];t<a;)Ee.push(setTimeout((function(){e.tick02.current.play()}),t)),t+=a/_[this.props.state.measure];if(!ge)return ye+=this.state.receivedVal[ge][1],void ge++}ge<fe.length-1?be=setTimeout(this.beatReadingFunc,1e3*this.state.receivedVal[ge][1]/(this.props.state.bpm/60)):setTimeout(this.stop,1e3*this.state.receivedVal[ge][1]/(this.props.state.bpm/60)),fe[ge].classList.toggle("value--animation"),/--rest/.test(fe[ge].className)||ge&&/^[\d]/.test(this.state.receivedVal[ge-1][0])||Ve[ve].play(),ye+=this.state.receivedVal[ge][1],ge++,++ve===Ve.length-1&&(ve=0)}},{key:"beatInput",value:function(){0,this.props.newState({metronomeSwitch:!0}),document.addEventListener("keydown",this.beatInputListener),this.beatReading("input")}},{key:"beatInputListener",value:function(){!ke||/--rest/.test(fe[ge].className)||0!==ge&&/^[\d]/.test(this.state.receivedVal[ge-1][0])?(!ke||ke&&(/--rest/.test(fe[ge].className)||0===ge||/^[\d]/.test(this.state.receivedVal[ge-1][0])))&&(we++,ke=!1):(fe[ge].classList.toggle("value--animation"),ke=!1)}},{key:"beatInputFunc",value:function(){var e=this;ke=!0,Ee.push(setTimeout((function(){!ke||/--rest/.test(fe[ge].className)||0!==ge&&/^[\d]/.test(e.state.receivedVal[ge-1][0])||we++,ge++,ke=!1}),1e3*this.state.receivedVal[ge][1]/(this.props.state.bpm/60)*90/100)),ge<fe.length-1&&(be=setTimeout(this.beatInputFunc,1e3*this.state.receivedVal[ge][1]/(this.props.state.bpm/60)))}},{key:"stop",value:function(){for(var e in this.setState({mistakes:we}),document.removeEventListener("keydown",this.beatInputListener),this.setState({metronomeSwitch:!1}),Ee)clearTimeout(Ee[e]),clearInterval(Ee[e]);for(var t in fe)fe[t].classList.contains("value--animation")&&fe[t].classList.toggle("value--animation");clearTimeout(be)}},{key:"scrollHUD",value:function(){document.addEventListener("scroll",(function(){var e=document.querySelector(".main_page").offsetTop;window.scrollY>e/4?document.querySelector("nav").classList.add("nav--sticky"):document.querySelector("nav").classList.remove("nav--sticky")}))}},{key:"clearBars",value:function(){this.setState({bars:[]}),this.clearScores.current.blur()}},{key:"componentDidMount",value:function(){he(this.props.state);for(var e=0;e<20;e++){var t=this.note01.current;t.volume=.2,Ve.push(t);var a=t.cloneNode(!0);a.volume=.2,Ve.push(a)}this.scrollHUD()}},{key:"render",value:function(){var e=this,t=this.state.bars;return s.a.createElement("div",null,this.props.state.settings?s.a.createElement(_e,null):null,this.props.state.info?s.a.createElement(qe,null):null,s.a.createElement("div",{style:{overflow:"hidden"}},s.a.createElement(je,null),s.a.createElement("nav",null,s.a.createElement("div",{className:"nav--hook--inv"}),s.a.createElement("div",{className:"nav--hook"}),s.a.createElement("div",{className:"button__holder"},s.a.createElement("div",{className:"btn-group m-1"},s.a.createElement("button",{disabled:1===this.props.state.mode,className:"btn btn-dark",onClick:this.beginner},s.a.createElement("span",{id:"beginner"},"Beginner")),this.props.state.tips?s.a.createElement(xe.a,{target:"beginner",placement:"top"},"Only simple values"):null,s.a.createElement("button",{disabled:2===this.props.state.mode,className:"btn btn-dark",onClick:this.intermediate},s.a.createElement("span",{id:"intermediate"},"Intermediate")),this.props.state.tips?s.a.createElement(xe.a,{target:"intermediate",placement:"top"},"+ dotted values"):null,s.a.createElement("button",{disabled:3===this.props.state.mode,className:"btn btn-dark",onClick:this.expert},s.a.createElement("span",{id:"expert"},"Expert")),this.props.state.tips?s.a.createElement(xe.a,{target:"expert",placement:"top"},"+ triplets and quinteplets"):null),s.a.createElement("button",{disabled:!this.state.bars.length,className:"btn btn-dark btn-sm btn__clear",onClick:this.clearBars,ref:this.clearScores},s.a.createElement("span",{id:"clearScores"},"\u2715")),this.props.state.tips?s.a.createElement(xe.a,{target:"clearScores",placement:"right"},"Clear the score board"):null,s.a.createElement("br",null),s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{className:"btn btn-dark",onClick:this.nextGen,disabled:this.state.metronomeSwitch,ref:this.new},s.a.createElement("span",{id:"new"},"New")),this.props.state.tips?s.a.createElement(xe.a,{target:"new",placement:"top"},"Generate new bars"):null,s.a.createElement("button",{className:"btn btn-dark",onClick:this.beat,ref:this.beatShow},s.a.createElement("span",{id:"beat"},"Beat")),this.props.state.tips?s.a.createElement(xe.a,{target:"beat",placement:"top"},"Show the position of beat"):null,s.a.createElement("button",{className:"btn btn-dark",disabled:!this.state.beat,onClick:this.beatNumb,ref:this.num},s.a.createElement("span",{id:"num"},"Num")),this.props.state.tips?s.a.createElement(xe.a,{target:"num",placement:"top"},"Show the number of the beat"):null,s.a.createElement("button",{className:"btn btn-dark",onClick:this.beatReading,disabled:this.state.bars.length<1||this.state.metronomeSwitch},s.a.createElement("span",{id:"reading"},"Reading")),this.props.state.tips?s.a.createElement(xe.a,{target:"reading",placement:"top"},"Listen to the rhytm"):null,s.a.createElement("button",{className:"btn btn-dark",onClick:this.stop,disabled:!this.state.metronomeSwitch},s.a.createElement("span",{id:"stop"},"Stop")),this.props.state.tips?s.a.createElement(xe.a,{target:"stop",placement:"top"},"Stop metronome"):null,s.a.createElement("button",{className:"btn btn-dark",onClick:this.beatInput,disabled:this.state.bars.length<1||this.state.metronomeSwitch},s.a.createElement("span",{id:"practice"},"Practice")),this.props.state.tips?s.a.createElement(xe.a,{target:"practice",placement:"top"},"Play note values with your keyboard (any key)"):null))),s.a.createElement("div",{className:"main_page"},s.a.createElement("div",null,s.a.createElement("audio",{ref:this.tick01},s.a.createElement("source",{src:v.a,type:"audio/mpeg"})),s.a.createElement("audio",{ref:this.tick02},s.a.createElement("source",{src:E.a,type:"audio/mpeg"})),s.a.createElement("audio",{ref:this.note01},s.a.createElement("source",{src:S.a,type:"audio/mpeg"}))),s.a.createElement("div",{className:"settings--hook",onMouseOver:this.settings},"Settings"),s.a.createElement("div",{className:"info--hook",onMouseOver:this.info},"Info"),s.a.createElement("div",{className:"score_body"},s.a.createElement("div",{className:"score"},t.map((function(a,n){var r=0,i=0;return s.a.createElement("div",{className:t.length-1===n?"bar bar_last":0===n?"bar bar_first":"bar",key:String(n)},s.a.createElement("div",{className:"bar__inside"},a.map((function(t,o){if(o+1<=a.length-1&&Array.isArray(a[o+1][0]))return r+=t[1],s.a.createElement("div",{style:{position:"relative",height:"118px"},key:String(n)+"_"+o},s.a.createElement("span",{className:"tuplet__num"},/triplet/.test(t[0])?3:5),(0===o&&Array.isArray(t)||1===o&&r===t[1]||Number.isInteger(r-t[1])||o===a.length-1&&t[1]===e.state.beamNum)&&i<_[e.props.state.measure]?s.a.createElement("div",{key:r+t[0],className:"beat",style:e.state.beat?/rest|whole/.test(t[0])?{opacity:"100%",top:"100%",left:"5px"}:/--end/.test(t[0])?{opacity:"100%",left:"10px"}:{opacity:"100%"}:{opacity:"0%"}},s.a.createElement("div",{style:e.state.beatNumb?{opacity:"1"}:{opacity:"0"}},r-t[1]+1),s.a.createElement("span",{style:{display:"none"}},i++)):null,s.a.createElement("div",{className:/triplet/.test(t[0])?"triplet":"quinteplet"},a[o+1].map((function(e,t){return t?t===a[o+1].length-1?s.a.createElement("div",{className:"value "+e[0],style:{marginRight:"0"},key:e[0]+String(n)+t}):s.a.createElement("div",{className:"value "+e[0],key:e[0]+String(n)+t}):s.a.createElement("div",{className:"value "+e[0],style:{marginLeft:"0"},key:e[0]+String(n)+t})}))));if(!Array.isArray(t[0])){var l,u=null;if(Array.isArray(t)&&("0"===t[0][0]||"1"===t[0][0])){var c=t[0].split("");u=Number(c.slice(0,1)),t[0]=c.join("")}if(Array.isArray(t)){var h=t[0].split("");h.reverse(),l=h.slice(0,3).join(""),r+=t[1]}return s.a.createElement("div",{className:Array.isArray(t)?"value "+t[0].match(/\D+[\d]*.+/).join(""):"value  "+e.props.state.measure,key:n+o+t[0]},s.a.createElement(Te,{link:u,ch:l,ind:o,bars:e.state.bars}),(0===o&&Array.isArray(t)||1===o&&r===t[1]||Number.isInteger(r-t[1])||o===a.length-1&&t[1]===e.state.beamNum)&&i<_[e.props.state.measure]?s.a.createElement("div",{key:r+t[0],className:"beat",style:e.state.beat?/rest|whole/.test(t[0])?{opacity:"100%",top:"100%",left:"5px"}:/--end/.test(t[0])?{opacity:"100%",left:"10px"}:{opacity:"100%"}:{opacity:"0%"}},s.a.createElement("div",{style:e.state.beatNumb?{opacity:"1"}:{opacity:"0"}},r-t[1]+1),s.a.createElement("span",{style:{display:"none"}},i++)):null)}}))))}))),s.a.createElement("div",{className:"mistakes",style:{opacity:null!==this.state.mistakes&&we>=0?"1":"0"}},"Mistakes: ",this.state.mistakes)))))}}]),a}(s.a.Component),Te=function(e){Object(c.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"shouldComponentUpdate",value:function(e){return this.props.bars!==e.bars}},{key:"render",value:function(){var e=null;return"dne"===this.props.ch&&0===this.props.link&&(e={left:"38px",width:"15px",top:"-21px",height:"40px"}),s.a.createElement("div",null,null!==this.props.link?s.a.createElement("div",{style:e,key:this.props.ch+this.props.ind,className:0===this.props.link?"linked_in":"linked_out"}):null)}}]),a}(s.a.Component),Re=Object(f.b)(d,b)(Ae);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Me=a(15),Le=Object(Me.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,a=Object(p.a)({},e);switch(t.type){case"CHANGE":var n=Object.keys(t.newState);return a[n]=t.newState[n],a;case"UPDATE":return t.newState;default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(s.a.createElement(f.a,{store:Le},s.a.createElement(s.a.StrictMode,null,s.a.createElement(Re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.1e9ade89.chunk.js.map